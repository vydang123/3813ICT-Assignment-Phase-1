function cov_1ov1a1b15x(){var path="/Users/vydang/Desktop/3813ICT-Assignment-Phase-1/Assignment-1/server/routes/deleteChannelFromGroup.js";var hash="7c034979cebe13850eb741cc6fc39ecac8558819";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/vydang/Desktop/3813ICT-Assignment-Phase-1/Assignment-1/server/routes/deleteChannelFromGroup.js",statementMap:{"0":{start:{line:1,column:0},end:{line:32,column:2}},"1":{start:{line:2,column:2},end:{line:31,column:5}},"2":{start:{line:3,column:4},end:{line:30,column:5}},"3":{start:{line:4,column:6},end:{line:4,column:29}},"4":{start:{line:6,column:24},end:{line:6,column:44}},"5":{start:{line:7,column:22},end:{line:7,column:48}},"6":{start:{line:10,column:30},end:{line:10,column:60}},"7":{start:{line:13,column:20},end:{line:13,column:71}},"8":{start:{line:15,column:6},end:{line:17,column:7}},"9":{start:{line:16,column:8},end:{line:16,column:85}},"10":{start:{line:19,column:30},end:{line:19,column:85}},"11":{start:{line:19,column:63},end:{line:19,column:84}},"12":{start:{line:22,column:6},end:{line:22,column:101}},"13":{start:{line:24,column:6},end:{line:24,column:74}},"14":{start:{line:26,column:6},end:{line:26,column:61}},"15":{start:{line:27,column:6},end:{line:27,column:80}},"16":{start:{line:29,column:6},end:{line:29,column:21}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:1,column:17},end:{line:1,column:18}},loc:{start:{line:1,column:38},end:{line:32,column:1}},line:1},"1":{name:"(anonymous_1)",decl:{start:{line:2,column:60},end:{line:2,column:61}},loc:{start:{line:2,column:80},end:{line:31,column:3}},line:2},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:52},end:{line:19,column:53}},loc:{start:{line:19,column:63},end:{line:19,column:84}},line:19}},branchMap:{"0":{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:15,column:6},end:{line:17,column:7}}],line:15}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7c034979cebe13850eb741cc6fc39ecac8558819"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1ov1a1b15x=function(){return actualCoverage;};}return actualCoverage;}cov_1ov1a1b15x();cov_1ov1a1b15x().s[0]++;module.exports=(db,app,client)=>{cov_1ov1a1b15x().f[0]++;cov_1ov1a1b15x().s[1]++;app.delete('/deleteChannelFromGroup/:channelId/:groupId',async(req,res)=>{cov_1ov1a1b15x().f[1]++;cov_1ov1a1b15x().s[2]++;try{cov_1ov1a1b15x().s[3]++;await client.connect();const channelId=(cov_1ov1a1b15x().s[4]++,req.params.channelId);const groupId=(cov_1ov1a1b15x().s[5]++,Number(req.params.groupId));const groupCollection=(cov_1ov1a1b15x().s[6]++,db.collection('group-channel'));// Replace 'group-channel' with your actual collection name
//find a group
const group=(cov_1ov1a1b15x().s[7]++,await groupCollection.findOne({groupid:groupId}));cov_1ov1a1b15x().s[8]++;if(!group){cov_1ov1a1b15x().b[0][0]++;cov_1ov1a1b15x().s[9]++;return res.status(400).send({success:false,message:'Group not found.'});}else{cov_1ov1a1b15x().b[0][1]++;}const updatedChannels=(cov_1ov1a1b15x().s[10]++,group.channels.filter(channel=>{cov_1ov1a1b15x().f[2]++;cov_1ov1a1b15x().s[11]++;return channel!==channelId;}));//find a channel and delete channel
cov_1ov1a1b15x().s[12]++;await groupCollection.updateOne({groupid:groupId},{$set:{channels:updatedChannels}});cov_1ov1a1b15x().s[13]++;res.send({success:true,message:'Channel removed from group.'});}catch(err){cov_1ov1a1b15x().s[14]++;console.error('Error in deleteChannelFromGroup:',err);cov_1ov1a1b15x().s[15]++;return res.status(500).send({success:false,message:'Server error.'});}finally{cov_1ov1a1b15x().s[16]++;client.close();}});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMW92MWExYjE1eCIsImFjdHVhbENvdmVyYWdlIiwicyIsIm1vZHVsZSIsImV4cG9ydHMiLCJkYiIsImFwcCIsImNsaWVudCIsImYiLCJkZWxldGUiLCJyZXEiLCJyZXMiLCJjb25uZWN0IiwiY2hhbm5lbElkIiwicGFyYW1zIiwiZ3JvdXBJZCIsIk51bWJlciIsImdyb3VwQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJncm91cCIsImZpbmRPbmUiLCJncm91cGlkIiwiYiIsInN0YXR1cyIsInNlbmQiLCJzdWNjZXNzIiwibWVzc2FnZSIsInVwZGF0ZWRDaGFubmVscyIsImNoYW5uZWxzIiwiZmlsdGVyIiwiY2hhbm5lbCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJjbG9zZSJdLCJzb3VyY2VzIjpbImRlbGV0ZUNoYW5uZWxGcm9tR3JvdXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAoZGIsIGFwcCwgY2xpZW50KSA9PiB7XG4gIGFwcC5kZWxldGUoJy9kZWxldGVDaGFubmVsRnJvbUdyb3VwLzpjaGFubmVsSWQvOmdyb3VwSWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKTtcblxuICAgICAgY29uc3QgY2hhbm5lbElkID0gcmVxLnBhcmFtcy5jaGFubmVsSWQ7XG4gICAgICBjb25zdCBncm91cElkID0gTnVtYmVyKHJlcS5wYXJhbXMuZ3JvdXBJZCk7XG5cbiAgICAgIFxuICAgICAgY29uc3QgZ3JvdXBDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignZ3JvdXAtY2hhbm5lbCcpOyAvLyBSZXBsYWNlICdncm91cC1jaGFubmVsJyB3aXRoIHlvdXIgYWN0dWFsIGNvbGxlY3Rpb24gbmFtZVxuXG4gICAgICAvL2ZpbmQgYSBncm91cFxuICAgICAgY29uc3QgZ3JvdXAgPSBhd2FpdCBncm91cENvbGxlY3Rpb24uZmluZE9uZSh7IGdyb3VwaWQ6IGdyb3VwSWQgfSk7XG5cbiAgICAgIGlmICghZ3JvdXApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdHcm91cCBub3QgZm91bmQuJyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBkYXRlZENoYW5uZWxzID0gZ3JvdXAuY2hhbm5lbHMuZmlsdGVyKGNoYW5uZWwgPT4gY2hhbm5lbCAhPT0gY2hhbm5lbElkKTtcblxuICAgICAgLy9maW5kIGEgY2hhbm5lbCBhbmQgZGVsZXRlIGNoYW5uZWxcbiAgICAgIGF3YWl0IGdyb3VwQ29sbGVjdGlvbi51cGRhdGVPbmUoeyBncm91cGlkOiBncm91cElkIH0sIHsgJHNldDogeyBjaGFubmVsczogdXBkYXRlZENoYW5uZWxzIH0gfSk7XG5cbiAgICAgIHJlcy5zZW5kKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0NoYW5uZWwgcmVtb3ZlZCBmcm9tIGdyb3VwLicgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBkZWxldGVDaGFubmVsRnJvbUdyb3VwOicsIGVycik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ1NlcnZlciBlcnJvci4nIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjbGllbnQuY2xvc2UoKTtcbiAgICB9XG4gIH0pO1xufTtcbiJdLCJtYXBwaW5ncyI6InExRUFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FBQUEsY0FBQSxHQUFBRSxDQUFBLE1BZlpDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLENBQUNDLEVBQUUsQ0FBRUMsR0FBRyxDQUFFQyxNQUFNLEdBQUssQ0FBQVAsY0FBQSxHQUFBUSxDQUFBLE1BQUFSLGNBQUEsR0FBQUUsQ0FBQSxNQUNwQ0ksR0FBRyxDQUFDRyxNQUFNLENBQUMsNkNBQTZDLENBQUUsTUFBT0MsR0FBRyxDQUFFQyxHQUFHLEdBQUssQ0FBQVgsY0FBQSxHQUFBUSxDQUFBLE1BQUFSLGNBQUEsR0FBQUUsQ0FBQSxNQUM1RSxHQUFJLENBQUFGLGNBQUEsR0FBQUUsQ0FBQSxNQUNGLEtBQU0sQ0FBQUssTUFBTSxDQUFDSyxPQUFPLENBQUMsQ0FBQyxDQUV0QixLQUFNLENBQUFDLFNBQVMsRUFBQWIsY0FBQSxHQUFBRSxDQUFBLE1BQUdRLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDRCxTQUFTLEVBQ3RDLEtBQU0sQ0FBQUUsT0FBTyxFQUFBZixjQUFBLEdBQUFFLENBQUEsTUFBR2MsTUFBTSxDQUFDTixHQUFHLENBQUNJLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDLEVBRzFDLEtBQU0sQ0FBQUUsZUFBZSxFQUFBakIsY0FBQSxHQUFBRSxDQUFBLE1BQUdHLEVBQUUsQ0FBQ2EsVUFBVSxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBRXhEO0FBQ0EsS0FBTSxDQUFBQyxLQUFLLEVBQUFuQixjQUFBLEdBQUFFLENBQUEsTUFBRyxLQUFNLENBQUFlLGVBQWUsQ0FBQ0csT0FBTyxDQUFDLENBQUVDLE9BQU8sQ0FBRU4sT0FBUSxDQUFDLENBQUMsRUFBQ2YsY0FBQSxHQUFBRSxDQUFBLE1BRWxFLEdBQUksQ0FBQ2lCLEtBQUssQ0FBRSxDQUFBbkIsY0FBQSxHQUFBc0IsQ0FBQSxTQUFBdEIsY0FBQSxHQUFBRSxDQUFBLE1BQ1YsTUFBTyxDQUFBUyxHQUFHLENBQUNZLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRSxLQUFLLENBQUVDLE9BQU8sQ0FBRSxrQkFBbUIsQ0FBQyxDQUFDLENBQzlFLENBQUMsS0FBQTFCLGNBQUEsR0FBQXNCLENBQUEsVUFFRCxLQUFNLENBQUFLLGVBQWUsRUFBQTNCLGNBQUEsR0FBQUUsQ0FBQSxPQUFHaUIsS0FBSyxDQUFDUyxRQUFRLENBQUNDLE1BQU0sQ0FBQ0MsT0FBTyxFQUFJLENBQUE5QixjQUFBLEdBQUFRLENBQUEsTUFBQVIsY0FBQSxHQUFBRSxDQUFBLGNBQUE0QixPQUFPLEdBQUtqQixTQUFTLENBQUQsQ0FBQyxDQUFDLEVBRS9FO0FBQUFiLGNBQUEsR0FBQUUsQ0FBQSxPQUNBLEtBQU0sQ0FBQWUsZUFBZSxDQUFDYyxTQUFTLENBQUMsQ0FBRVYsT0FBTyxDQUFFTixPQUFRLENBQUMsQ0FBRSxDQUFFaUIsSUFBSSxDQUFFLENBQUVKLFFBQVEsQ0FBRUQsZUFBZ0IsQ0FBRSxDQUFDLENBQUMsQ0FBQzNCLGNBQUEsR0FBQUUsQ0FBQSxPQUUvRlMsR0FBRyxDQUFDYSxJQUFJLENBQUMsQ0FBRUMsT0FBTyxDQUFFLElBQUksQ0FBRUMsT0FBTyxDQUFFLDZCQUE4QixDQUFDLENBQUMsQ0FDckUsQ0FBRSxNQUFPTyxHQUFHLENBQUUsQ0FBQWpDLGNBQUEsR0FBQUUsQ0FBQSxPQUNaZ0MsT0FBTyxDQUFDQyxLQUFLLENBQUMsa0NBQWtDLENBQUVGLEdBQUcsQ0FBQyxDQUFDakMsY0FBQSxHQUFBRSxDQUFBLE9BQ3ZELE1BQU8sQ0FBQVMsR0FBRyxDQUFDWSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUUsS0FBSyxDQUFFQyxPQUFPLENBQUUsZUFBZ0IsQ0FBQyxDQUFDLENBQzNFLENBQUMsT0FBUyxDQUFBMUIsY0FBQSxHQUFBRSxDQUFBLE9BQ1JLLE1BQU0sQ0FBQzZCLEtBQUssQ0FBQyxDQUFDLENBQ2hCLENBQ0YsQ0FBQyxDQUFDLENBQ0osQ0FBQyJ9