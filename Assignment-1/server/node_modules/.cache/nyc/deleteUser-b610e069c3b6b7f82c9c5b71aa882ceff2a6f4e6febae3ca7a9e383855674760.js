function cov_2afc8jrgti(){var path="/Users/vydang/Desktop/3813ICT-Assignment-Phase-1/Assignment-1/server/routes/deleteUser.js";var hash="9755ae9e209c2506cbcba6bcff44b9d575363a53";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/vydang/Desktop/3813ICT-Assignment-Phase-1/Assignment-1/server/routes/deleteUser.js",statementMap:{"0":{start:{line:1,column:0},end:{line:29,column:2}},"1":{start:{line:2,column:4},end:{line:28,column:7}},"2":{start:{line:3,column:8},end:{line:5,column:9}},"3":{start:{line:4,column:12},end:{line:4,column:75}},"4":{start:{line:7,column:22},end:{line:7,column:38}},"5":{start:{line:9,column:8},end:{line:27,column:9}},"6":{start:{line:11,column:12},end:{line:11,column:35}},"7":{start:{line:14,column:27},end:{line:14,column:76}},"8":{start:{line:16,column:12},end:{line:20,column:13}},"9":{start:{line:17,column:16},end:{line:17,column:75}},"10":{start:{line:19,column:16},end:{line:19,column:76}},"11":{start:{line:22,column:12},end:{line:22,column:57}},"12":{start:{line:23,column:12},end:{line:23,column:77}},"13":{start:{line:26,column:12},end:{line:26,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:1,column:17},end:{line:1,column:18}},loc:{start:{line:1,column:44},end:{line:29,column:1}},line:1},"1":{name:"(anonymous_1)",decl:{start:{line:2,column:37},end:{line:2,column:38}},loc:{start:{line:2,column:57},end:{line:28,column:5}},line:2}},branchMap:{"0":{loc:{start:{line:3,column:8},end:{line:5,column:9}},type:"if",locations:[{start:{line:3,column:8},end:{line:5,column:9}},{start:{line:3,column:8},end:{line:5,column:9}}],line:3},"1":{loc:{start:{line:16,column:12},end:{line:20,column:13}},type:"if",locations:[{start:{line:16,column:12},end:{line:20,column:13}},{start:{line:16,column:12},end:{line:20,column:13}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9755ae9e209c2506cbcba6bcff44b9d575363a53"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2afc8jrgti=function(){return actualCoverage;};}return actualCoverage;}cov_2afc8jrgti();cov_2afc8jrgti().s[0]++;module.exports=async(db,app,client)=>{cov_2afc8jrgti().f[0]++;cov_2afc8jrgti().s[1]++;app.delete('/deleteUser/:email',async(req,res)=>{cov_2afc8jrgti().f[1]++;cov_2afc8jrgti().s[2]++;if(!req.params.email){cov_2afc8jrgti().b[0][0]++;cov_2afc8jrgti().s[3]++;return res.status(400).send({message:"Email is required."});}else{cov_2afc8jrgti().b[0][1]++;}const email=(cov_2afc8jrgti().s[4]++,req.params.email);cov_2afc8jrgti().s[5]++;try{cov_2afc8jrgti().s[6]++;// Connect to MongoDB
await client.connect();// Find and delete the user by email
const result=(cov_2afc8jrgti().s[7]++,await db.collection('users').deleteOne({email}));cov_2afc8jrgti().s[8]++;if(result.deletedCount===1){cov_2afc8jrgti().b[1][0]++;cov_2afc8jrgti().s[9]++;return res.send({message:"User deleted successfully."});}else{cov_2afc8jrgti().b[1][1]++;cov_2afc8jrgti().s[10]++;return res.status(404).send({message:"User not found."});}}catch(error){cov_2afc8jrgti().s[11]++;console.error("Error deleting user:",error);cov_2afc8jrgti().s[12]++;return res.status(500).send({message:"Error deleting user."});}finally{cov_2afc8jrgti().s[13]++;// Close the MongoDB client after the operation
client.close();}});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmFmYzhqcmd0aSIsImFjdHVhbENvdmVyYWdlIiwicyIsIm1vZHVsZSIsImV4cG9ydHMiLCJkYiIsImFwcCIsImNsaWVudCIsImYiLCJkZWxldGUiLCJyZXEiLCJyZXMiLCJwYXJhbXMiLCJlbWFpbCIsImIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImNvbm5lY3QiLCJyZXN1bHQiLCJjb2xsZWN0aW9uIiwiZGVsZXRlT25lIiwiZGVsZXRlZENvdW50IiwiZXJyb3IiLCJjb25zb2xlIiwiY2xvc2UiXSwic291cmNlcyI6WyJkZWxldGVVc2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKGRiLCBhcHAsIGNsaWVudCkgPT4ge1xuICAgIGFwcC5kZWxldGUoJy9kZWxldGVVc2VyLzplbWFpbCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcS5wYXJhbXMuZW1haWwpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IG1lc3NhZ2U6IFwiRW1haWwgaXMgcmVxdWlyZWQuXCIgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbWFpbCA9IHJlcS5wYXJhbXMuZW1haWw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENvbm5lY3QgdG8gTW9uZ29EQlxuICAgICAgICAgICAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgLy8gRmluZCBhbmQgZGVsZXRlIHRoZSB1c2VyIGJ5IGVtYWlsXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmRlbGV0ZU9uZSh7IGVtYWlsIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0LmRlbGV0ZWRDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7IG1lc3NhZ2U6IFwiVXNlciBkZWxldGVkIHN1Y2Nlc3NmdWxseS5cIiB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZC5cIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBcIkVycm9yIGRlbGV0aW5nIHVzZXIuXCIgfSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAvLyBDbG9zZSB0aGUgTW9uZ29EQiBjbGllbnQgYWZ0ZXIgdGhlIG9wZXJhdGlvblxuICAgICAgICAgICAgY2xpZW50LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiJnckVBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBQUFBLGNBQUEsR0FBQUUsQ0FBQSxNQWZaQyxNQUFNLENBQUNDLE9BQU8sQ0FBRyxNQUFPQyxFQUFFLENBQUVDLEdBQUcsQ0FBRUMsTUFBTSxHQUFLLENBQUFQLGNBQUEsR0FBQVEsQ0FBQSxNQUFBUixjQUFBLEdBQUFFLENBQUEsTUFDeENJLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLG9CQUFvQixDQUFFLE1BQU9DLEdBQUcsQ0FBRUMsR0FBRyxHQUFLLENBQUFYLGNBQUEsR0FBQVEsQ0FBQSxNQUFBUixjQUFBLEdBQUFFLENBQUEsTUFDakQsR0FBSSxDQUFDUSxHQUFHLENBQUNFLE1BQU0sQ0FBQ0MsS0FBSyxDQUFFLENBQUFiLGNBQUEsR0FBQWMsQ0FBQSxTQUFBZCxjQUFBLEdBQUFFLENBQUEsTUFDbkIsTUFBTyxDQUFBUyxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRSxvQkFBcUIsQ0FBQyxDQUFDLENBQ2xFLENBQUMsS0FBQWpCLGNBQUEsR0FBQWMsQ0FBQSxVQUVELEtBQU0sQ0FBQUQsS0FBSyxFQUFBYixjQUFBLEdBQUFFLENBQUEsTUFBR1EsR0FBRyxDQUFDRSxNQUFNLENBQUNDLEtBQUssRUFBQ2IsY0FBQSxHQUFBRSxDQUFBLE1BRS9CLEdBQUksQ0FBQUYsY0FBQSxHQUFBRSxDQUFBLE1BQ0E7QUFDQSxLQUFNLENBQUFLLE1BQU0sQ0FBQ1csT0FBTyxDQUFDLENBQUMsQ0FFdEI7QUFDQSxLQUFNLENBQUFDLE1BQU0sRUFBQW5CLGNBQUEsR0FBQUUsQ0FBQSxNQUFHLEtBQU0sQ0FBQUcsRUFBRSxDQUFDZSxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUNDLFNBQVMsQ0FBQyxDQUFFUixLQUFNLENBQUMsQ0FBQyxFQUFDYixjQUFBLEdBQUFFLENBQUEsTUFFakUsR0FBSWlCLE1BQU0sQ0FBQ0csWUFBWSxHQUFLLENBQUMsQ0FBRSxDQUFBdEIsY0FBQSxHQUFBYyxDQUFBLFNBQUFkLGNBQUEsR0FBQUUsQ0FBQSxNQUMzQixNQUFPLENBQUFTLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRSw0QkFBNkIsQ0FBQyxDQUFDLENBQzlELENBQUMsSUFBTSxDQUFBakIsY0FBQSxHQUFBYyxDQUFBLFNBQUFkLGNBQUEsR0FBQUUsQ0FBQSxPQUNILE1BQU8sQ0FBQVMsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUUsaUJBQWtCLENBQUMsQ0FBQyxDQUMvRCxDQUNKLENBQUUsTUFBT00sS0FBSyxDQUFFLENBQUF2QixjQUFBLEdBQUFFLENBQUEsT0FDWnNCLE9BQU8sQ0FBQ0QsS0FBSyxDQUFDLHNCQUFzQixDQUFFQSxLQUFLLENBQUMsQ0FBQ3ZCLGNBQUEsR0FBQUUsQ0FBQSxPQUM3QyxNQUFPLENBQUFTLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBRUMsT0FBTyxDQUFFLHNCQUF1QixDQUFDLENBQUMsQ0FDcEUsQ0FBQyxPQUFTLENBQUFqQixjQUFBLEdBQUFFLENBQUEsT0FDTjtBQUNBSyxNQUFNLENBQUNrQixLQUFLLENBQUMsQ0FBQyxDQUNsQixDQUNKLENBQUMsQ0FBQyxDQUNOLENBQUMifQ==