function cov_23u2nj6qir(){var path="/Users/vydang/Desktop/3813ICT-Assignment-Phase-1/Assignment-1/server/routes/postLogin.js";var hash="9162f6a4fea8441ba7a3c740f0ded133a88a2d10";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/vydang/Desktop/3813ICT-Assignment-Phase-1/Assignment-1/server/routes/postLogin.js",statementMap:{"0":{start:{line:1,column:0},end:{line:38,column:2}},"1":{start:{line:2,column:2},end:{line:37,column:5}},"2":{start:{line:4,column:6},end:{line:4,column:29}},"3":{start:{line:6,column:6},end:{line:8,column:9}},"4":{start:{line:7,column:10},end:{line:7,column:37}},"5":{start:{line:11,column:16},end:{line:11,column:30}},"6":{start:{line:12,column:16},end:{line:12,column:28}},"7":{start:{line:13,column:6},end:{line:13,column:23}},"8":{start:{line:16,column:17},end:{line:16,column:80}},"9":{start:{line:17,column:6},end:{line:17,column:24}},"10":{start:{line:18,column:10},end:{line:32,column:11}},"11":{start:{line:19,column:14},end:{line:29,column:17}},"12":{start:{line:31,column:14},end:{line:31,column:41}},"13":{start:{line:34,column:6},end:{line:34,column:21}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:1,column:17},end:{line:1,column:18}},loc:{start:{line:1,column:44},end:{line:38,column:1}},line:1},"1":{name:"(anonymous_1)",decl:{start:{line:2,column:21},end:{line:2,column:22}},loc:{start:{line:2,column:46},end:{line:37,column:3}},line:2}},branchMap:{"0":{loc:{start:{line:6,column:6},end:{line:8,column:9}},type:"if",locations:[{start:{line:6,column:6},end:{line:8,column:9}},{start:{line:6,column:6},end:{line:8,column:9}}],line:6},"1":{loc:{start:{line:18,column:10},end:{line:32,column:11}},type:"if",locations:[{start:{line:18,column:10},end:{line:32,column:11}},{start:{line:18,column:10},end:{line:32,column:11}}],line:18}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9162f6a4fea8441ba7a3c740f0ded133a88a2d10"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_23u2nj6qir=function(){return actualCoverage;};}return actualCoverage;}cov_23u2nj6qir();cov_23u2nj6qir().s[0]++;module.exports=function(db,app,client){cov_23u2nj6qir().f[0]++;cov_23u2nj6qir().s[1]++;app.post('/login',async function(req,res){cov_23u2nj6qir().f[1]++;cov_23u2nj6qir().s[2]++;// Connect to the MongoDB client
await client.connect();cov_23u2nj6qir().s[3]++;if(!req.body){cov_23u2nj6qir().b[0][0]++;cov_23u2nj6qir().s[4]++;return res.sendStatus(400);}else{cov_23u2nj6qir().b[0][1]++;}const u=(cov_23u2nj6qir().s[5]++,req.body.email);const p=(cov_23u2nj6qir().s[6]++,req.body.pwd);cov_23u2nj6qir().s[7]++;console.log(u,p);// Retrieve the user from the 'users' collection
let user=(cov_23u2nj6qir().s[8]++,await db.collection('users').findOne({email:u,password:p}));cov_23u2nj6qir().s[9]++;console.log(user);cov_23u2nj6qir().s[10]++;if(user){cov_23u2nj6qir().b[1][0]++;cov_23u2nj6qir().s[11]++;res.send({valid:true,user:{userid:user.userid,username:user.username,role:user.role,groupnames:user.groupnames,email:user.email,channelnames:user.channelnames}});}else{cov_23u2nj6qir().b[1][1]++;cov_23u2nj6qir().s[12]++;res.send({valid:false});}cov_23u2nj6qir().s[13]++;client.close();});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjN1Mm5qNnFpciIsImFjdHVhbENvdmVyYWdlIiwicyIsIm1vZHVsZSIsImV4cG9ydHMiLCJkYiIsImFwcCIsImNsaWVudCIsImYiLCJwb3N0IiwicmVxIiwicmVzIiwiY29ubmVjdCIsImJvZHkiLCJiIiwic2VuZFN0YXR1cyIsInUiLCJlbWFpbCIsInAiLCJwd2QiLCJjb25zb2xlIiwibG9nIiwidXNlciIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwicGFzc3dvcmQiLCJzZW5kIiwidmFsaWQiLCJ1c2VyaWQiLCJ1c2VybmFtZSIsInJvbGUiLCJncm91cG5hbWVzIiwiY2hhbm5lbG5hbWVzIiwiY2xvc2UiXSwic291cmNlcyI6WyJwb3N0TG9naW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYiwgYXBwLCBjbGllbnQgKSB7XG4gIGFwcC5wb3N0KCcvbG9naW4nLCBhc3luYyBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgIC8vIENvbm5lY3QgdG8gdGhlIE1vbmdvREIgY2xpZW50XG4gICAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuXG4gICAgICBpZiAoIXJlcS5ib2R5KSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDQwMCk7XG4gICAgICAgIH1cbiAgICBcblxuICAgICAgY29uc3QgdSA9IHJlcS5ib2R5LmVtYWlsO1xuICAgICAgY29uc3QgcCA9IHJlcS5ib2R5LnB3ZDtcbiAgICAgIGNvbnNvbGUubG9nKHUscCk7XG5cbiAgICAgIC8vIFJldHJpZXZlIHRoZSB1c2VyIGZyb20gdGhlICd1c2VycycgY29sbGVjdGlvblxuICAgICAgbGV0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoeyBlbWFpbDogdSwgcGFzc3dvcmQ6IHAgfSlcbiAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICAgIHVzZXJpZDogdXNlci51c2VyaWQsXG4gICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgICAgICAgICAgICAgIGdyb3VwbmFtZXM6IHVzZXIuZ3JvdXBuYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsbmFtZXM6IHVzZXIuY2hhbm5lbG5hbWVzXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlcy5zZW5kKHsgdmFsaWQ6IGZhbHNlIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgY2xpZW50LmNsb3NlKCk7XG5cbiAgICAgIFxuICB9KTtcbn07Il0sIm1hcHBpbmdzIjoiNnFFQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQUFBQSxjQUFBLEdBQUFFLENBQUEsTUFmWkMsTUFBTSxDQUFDQyxPQUFPLENBQUcsU0FBU0MsRUFBRSxDQUFFQyxHQUFHLENBQUVDLE1BQU0sQ0FBRyxDQUFBUCxjQUFBLEdBQUFRLENBQUEsTUFBQVIsY0FBQSxHQUFBRSxDQUFBLE1BQzFDSSxHQUFHLENBQUNHLElBQUksQ0FBQyxRQUFRLENBQUUsZUFBZUMsR0FBRyxDQUFFQyxHQUFHLENBQUUsQ0FBQVgsY0FBQSxHQUFBUSxDQUFBLE1BQUFSLGNBQUEsR0FBQUUsQ0FBQSxNQUMxQztBQUNFLEtBQU0sQ0FBQUssTUFBTSxDQUFDSyxPQUFPLENBQUMsQ0FBQyxDQUFDWixjQUFBLEdBQUFFLENBQUEsTUFFdkIsR0FBSSxDQUFDUSxHQUFHLENBQUNHLElBQUksQ0FBRSxDQUFBYixjQUFBLEdBQUFjLENBQUEsU0FBQWQsY0FBQSxHQUFBRSxDQUFBLE1BQ1gsTUFBTyxDQUFBUyxHQUFHLENBQUNJLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FDNUIsQ0FBQyxLQUFBZixjQUFBLEdBQUFjLENBQUEsVUFHSCxLQUFNLENBQUFFLENBQUMsRUFBQWhCLGNBQUEsR0FBQUUsQ0FBQSxNQUFHUSxHQUFHLENBQUNHLElBQUksQ0FBQ0ksS0FBSyxFQUN4QixLQUFNLENBQUFDLENBQUMsRUFBQWxCLGNBQUEsR0FBQUUsQ0FBQSxNQUFHUSxHQUFHLENBQUNHLElBQUksQ0FBQ00sR0FBRyxFQUFDbkIsY0FBQSxHQUFBRSxDQUFBLE1BQ3ZCa0IsT0FBTyxDQUFDQyxHQUFHLENBQUNMLENBQUMsQ0FBQ0UsQ0FBQyxDQUFDLENBRWhCO0FBQ0EsR0FBSSxDQUFBSSxJQUFJLEVBQUF0QixjQUFBLEdBQUFFLENBQUEsTUFBRyxLQUFNLENBQUFHLEVBQUUsQ0FBQ2tCLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLENBQUVQLEtBQUssQ0FBRUQsQ0FBQyxDQUFFUyxRQUFRLENBQUVQLENBQUUsQ0FBQyxDQUFDLEVBQUFsQixjQUFBLEdBQUFFLENBQUEsTUFDMUVrQixPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDLENBQUN0QixjQUFBLEdBQUFFLENBQUEsT0FDZCxHQUFJb0IsSUFBSSxDQUFFLENBQUF0QixjQUFBLEdBQUFjLENBQUEsU0FBQWQsY0FBQSxHQUFBRSxDQUFBLE9BQ05TLEdBQUcsQ0FBQ2UsSUFBSSxDQUFDLENBQ0xDLEtBQUssQ0FBRSxJQUFJLENBQ1hMLElBQUksQ0FBRSxDQUNGTSxNQUFNLENBQUVOLElBQUksQ0FBQ00sTUFBTSxDQUNuQkMsUUFBUSxDQUFFUCxJQUFJLENBQUNPLFFBQVEsQ0FDdkJDLElBQUksQ0FBRVIsSUFBSSxDQUFDUSxJQUFJLENBQ2ZDLFVBQVUsQ0FBRVQsSUFBSSxDQUFDUyxVQUFVLENBQzNCZCxLQUFLLENBQUVLLElBQUksQ0FBQ0wsS0FBSyxDQUNqQmUsWUFBWSxDQUFFVixJQUFJLENBQUNVLFlBQ3ZCLENBQ0osQ0FBQyxDQUFDLENBQ04sQ0FBQyxJQUFNLENBQUFoQyxjQUFBLEdBQUFjLENBQUEsU0FBQWQsY0FBQSxHQUFBRSxDQUFBLE9BQ0hTLEdBQUcsQ0FBQ2UsSUFBSSxDQUFDLENBQUVDLEtBQUssQ0FBRSxLQUFNLENBQUMsQ0FBQyxDQUM5QixDQUFDM0IsY0FBQSxHQUFBRSxDQUFBLE9BRUxLLE1BQU0sQ0FBQzBCLEtBQUssQ0FBQyxDQUFDLENBR2xCLENBQUMsQ0FBQyxDQUNKLENBQUMifQ==