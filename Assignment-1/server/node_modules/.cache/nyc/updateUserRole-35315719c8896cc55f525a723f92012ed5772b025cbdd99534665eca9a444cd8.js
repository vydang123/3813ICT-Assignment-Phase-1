function cov_24re3zwlf1(){var path="/Users/vydang/Desktop/3813ICT-Assignment-Phase-1/Assignment-1/server/routes/updateUserRole.js";var hash="37cfc2a1879ebd1cd7077c9d918a3439b18b8c44";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/vydang/Desktop/3813ICT-Assignment-Phase-1/Assignment-1/server/routes/updateUserRole.js",statementMap:{"0":{start:{line:1,column:0},end:{line:27,column:2}},"1":{start:{line:2,column:4},end:{line:26,column:7}},"2":{start:{line:3,column:36},end:{line:3,column:44}},"3":{start:{line:5,column:8},end:{line:25,column:9}},"4":{start:{line:6,column:12},end:{line:6,column:35}},"5":{start:{line:8,column:36},end:{line:8,column:58}},"6":{start:{line:11,column:25},end:{line:11,column:74}},"7":{start:{line:12,column:12},end:{line:19,column:13}},"8":{start:{line:14,column:16},end:{line:14,column:96}},"9":{start:{line:16,column:16},end:{line:16,column:73}},"10":{start:{line:18,column:16},end:{line:18,column:69}},"11":{start:{line:21,column:12},end:{line:21,column:60}},"12":{start:{line:22,column:12},end:{line:22,column:75}},"13":{start:{line:24,column:12},end:{line:24,column:33}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:1,column:17},end:{line:1,column:18}},loc:{start:{line:1,column:44},end:{line:27,column:1}},line:1},"1":{name:"(anonymous_1)",decl:{start:{line:2,column:31},end:{line:2,column:32}},loc:{start:{line:2,column:51},end:{line:26,column:5}},line:2}},branchMap:{"0":{loc:{start:{line:12,column:12},end:{line:19,column:13}},type:"if",locations:[{start:{line:12,column:12},end:{line:19,column:13}},{start:{line:12,column:12},end:{line:19,column:13}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37cfc2a1879ebd1cd7077c9d918a3439b18b8c44"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_24re3zwlf1=function(){return actualCoverage;};}return actualCoverage;}cov_24re3zwlf1();cov_24re3zwlf1().s[0]++;module.exports=async(db,app,client)=>{cov_24re3zwlf1().f[0]++;cov_24re3zwlf1().s[1]++;app.put('/updateUserRole',async(req,res)=>{cov_24re3zwlf1().f[1]++;const{userId,newRole}=(cov_24re3zwlf1().s[2]++,req.body);cov_24re3zwlf1().s[3]++;try{cov_24re3zwlf1().s[4]++;await client.connect();// Connect to MongoDB
const usersCollection=(cov_24re3zwlf1().s[5]++,db.collection('users'));// Find user and update role
const user=(cov_24re3zwlf1().s[6]++,await usersCollection.findOne({userid:userId}));cov_24re3zwlf1().s[7]++;if(user){cov_24re3zwlf1().b[0][0]++;cov_24re3zwlf1().s[8]++;// Update the user's role
await usersCollection.updateOne({_id:user._id},{$set:{role:newRole}});cov_24re3zwlf1().s[9]++;res.send({message:"User role updated successfully."});}else{cov_24re3zwlf1().b[0][1]++;cov_24re3zwlf1().s[10]++;res.status(404).send({message:"User not found."});}}catch(err){cov_24re3zwlf1().s[11]++;console.error("Error updating user role:",err);cov_24re3zwlf1().s[12]++;res.status(500).send({message:"Error updating user role."});}finally{cov_24re3zwlf1().s[13]++;await client.close();// Close MongoDB connection
}});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjRyZTN6d2xmMSIsImFjdHVhbENvdmVyYWdlIiwicyIsIm1vZHVsZSIsImV4cG9ydHMiLCJkYiIsImFwcCIsImNsaWVudCIsImYiLCJwdXQiLCJyZXEiLCJyZXMiLCJ1c2VySWQiLCJuZXdSb2xlIiwiYm9keSIsImNvbm5lY3QiLCJ1c2Vyc0NvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwidXNlciIsImZpbmRPbmUiLCJ1c2VyaWQiLCJiIiwidXBkYXRlT25lIiwiX2lkIiwiJHNldCIsInJvbGUiLCJzZW5kIiwibWVzc2FnZSIsInN0YXR1cyIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImNsb3NlIl0sInNvdXJjZXMiOlsidXBkYXRlVXNlclJvbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoZGIsIGFwcCwgY2xpZW50KSA9PiB7XG4gICAgYXBwLnB1dCgnL3VwZGF0ZVVzZXJSb2xlJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBuZXdSb2xlIH0gPSByZXEuYm9keTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKTsgLy8gQ29ubmVjdCB0byBNb25nb0RCXG5cbiAgICAgICAgICAgIGNvbnN0IHVzZXJzQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJyk7XG5cbiAgICAgICAgICAgIC8vIEZpbmQgdXNlciBhbmQgdXBkYXRlIHJvbGVcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vyc0NvbGxlY3Rpb24uZmluZE9uZSh7IHVzZXJpZDogdXNlcklkIH0pO1xuICAgICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHVzZXIncyByb2xlXG4gICAgICAgICAgICAgICAgYXdhaXQgdXNlcnNDb2xsZWN0aW9uLnVwZGF0ZU9uZSh7IF9pZDogdXNlci5faWQgfSwgeyAkc2V0OiB7IHJvbGU6IG5ld1JvbGUgfSB9KTtcblxuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogXCJVc2VyIHJvbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHkuXCIgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZC5cIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgdXNlciByb2xlOlwiLCBlcnIpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBcIkVycm9yIHVwZGF0aW5nIHVzZXIgcm9sZS5cIiB9KTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5jbG9zZSgpOyAvLyBDbG9zZSBNb25nb0RCIGNvbm5lY3Rpb25cbiAgICAgICAgfVxuICAgIH0pO1xufTtcbiJdLCJtYXBwaW5ncyI6InkvREFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FBQUEsY0FBQSxHQUFBRSxDQUFBLE1BZlpDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLE1BQU9DLEVBQUUsQ0FBRUMsR0FBRyxDQUFFQyxNQUFNLEdBQUssQ0FBQVAsY0FBQSxHQUFBUSxDQUFBLE1BQUFSLGNBQUEsR0FBQUUsQ0FBQSxNQUN4Q0ksR0FBRyxDQUFDRyxHQUFHLENBQUMsaUJBQWlCLENBQUUsTUFBT0MsR0FBRyxDQUFFQyxHQUFHLEdBQUssQ0FBQVgsY0FBQSxHQUFBUSxDQUFBLE1BQzNDLEtBQU0sQ0FBRUksTUFBTSxDQUFFQyxPQUFRLENBQUMsRUFBQWIsY0FBQSxHQUFBRSxDQUFBLE1BQUdRLEdBQUcsQ0FBQ0ksSUFBSSxFQUFDZCxjQUFBLEdBQUFFLENBQUEsTUFFckMsR0FBSSxDQUFBRixjQUFBLEdBQUFFLENBQUEsTUFDQSxLQUFNLENBQUFLLE1BQU0sQ0FBQ1EsT0FBTyxDQUFDLENBQUMsQ0FBRTtBQUV4QixLQUFNLENBQUFDLGVBQWUsRUFBQWhCLGNBQUEsR0FBQUUsQ0FBQSxNQUFHRyxFQUFFLENBQUNZLFVBQVUsQ0FBQyxPQUFPLENBQUMsRUFFOUM7QUFDQSxLQUFNLENBQUFDLElBQUksRUFBQWxCLGNBQUEsR0FBQUUsQ0FBQSxNQUFHLEtBQU0sQ0FBQWMsZUFBZSxDQUFDRyxPQUFPLENBQUMsQ0FBRUMsTUFBTSxDQUFFUixNQUFPLENBQUMsQ0FBQyxFQUFDWixjQUFBLEdBQUFFLENBQUEsTUFDL0QsR0FBSWdCLElBQUksQ0FBRSxDQUFBbEIsY0FBQSxHQUFBcUIsQ0FBQSxTQUFBckIsY0FBQSxHQUFBRSxDQUFBLE1BQ047QUFDQSxLQUFNLENBQUFjLGVBQWUsQ0FBQ00sU0FBUyxDQUFDLENBQUVDLEdBQUcsQ0FBRUwsSUFBSSxDQUFDSyxHQUFJLENBQUMsQ0FBRSxDQUFFQyxJQUFJLENBQUUsQ0FBRUMsSUFBSSxDQUFFWixPQUFRLENBQUUsQ0FBQyxDQUFDLENBQUNiLGNBQUEsR0FBQUUsQ0FBQSxNQUVoRlMsR0FBRyxDQUFDZSxJQUFJLENBQUMsQ0FBRUMsT0FBTyxDQUFFLGlDQUFrQyxDQUFDLENBQUMsQ0FDNUQsQ0FBQyxJQUFNLENBQUEzQixjQUFBLEdBQUFxQixDQUFBLFNBQUFyQixjQUFBLEdBQUFFLENBQUEsT0FDSFMsR0FBRyxDQUFDaUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDRixJQUFJLENBQUMsQ0FBRUMsT0FBTyxDQUFFLGlCQUFrQixDQUFDLENBQUMsQ0FDeEQsQ0FDSixDQUFFLE1BQU9FLEdBQUcsQ0FBRSxDQUFBN0IsY0FBQSxHQUFBRSxDQUFBLE9BQ1Y0QixPQUFPLENBQUNDLEtBQUssQ0FBQywyQkFBMkIsQ0FBRUYsR0FBRyxDQUFDLENBQUM3QixjQUFBLEdBQUFFLENBQUEsT0FDaERTLEdBQUcsQ0FBQ2lCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0YsSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRSwyQkFBNEIsQ0FBQyxDQUFDLENBQ2xFLENBQUMsT0FBUyxDQUFBM0IsY0FBQSxHQUFBRSxDQUFBLE9BQ04sS0FBTSxDQUFBSyxNQUFNLENBQUN5QixLQUFLLENBQUMsQ0FBQyxDQUFFO0FBQzFCLENBQ0osQ0FBQyxDQUFDLENBQ04sQ0FBQyJ9